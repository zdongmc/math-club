<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math League Meet Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            overflow: hidden;
            color: white;
        }

        .slide-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .slide {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px;
            position: absolute;
            top: 0;
            left: 0;
        }

        .slide.active {
            display: flex;
        }

        .welcome-slide {
            text-align: center;
        }

        .welcome-slide h1 {
            font-size: 4.5rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-slide h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: white;
        }

        .meet-dates-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px 20px;
            max-width: 500px;
            margin: 5px auto 15px;
        }

        .meet-date-item {
            font-size: 1.2rem;
            color: white;
            padding: 2px 5px;
        }

        .welcome-slide .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 40px auto;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .info-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #fbbf24;
        }

        .info-card p {
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .round-title {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .round-subtitle {
            font-size: 2rem;
            margin-bottom: 40px;
            color: rgba(255, 255, 255, 0.9);
        }

        .round-info {
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-align: center;
            max-width: 900px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.95);
        }

        .timer-display {
            font-size: 8rem;
            font-weight: bold;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 40px 80px;
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            min-width: 400px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .timer-display.warning {
            animation: pulse 1s infinite;
            color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
            border-color: #fbbf24;
        }

        .timer-display.critical {
            animation: pulse-fast 0.5s infinite;
            color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }

        @keyframes pulse-fast {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.05); }
        }

        .timer-controls {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #1e3a8a;
            padding: 15px 40px;
            font-size: 1.3rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.primary {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            border-color: #fbbf24;
        }

        .btn.primary:hover {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border-color: #f59e0b;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .slide-counter {
            color: white;
            font-size: 1.2rem;
            min-width: 80px;
            text-align: center;
            font-weight: bold;
        }

        .instructions-list {
            text-align: left;
            font-size: 1.3rem;
            line-height: 2;
            max-width: 900px;
            margin: 20px auto;
        }

        .instructions-list li {
            margin-bottom: 15px;
            padding-left: 10px;
        }

        .highlight {
            color: #fbbf24;
            font-weight: bold;
        }

        .relay-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
            max-width: 1000px;
        }

        .relay-card {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .relay-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #fbbf24;
        }

        .status-message {
            font-size: 1.8rem;
            margin: 20px 0;
            color: #fbbf24;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="slide-container">
        <!-- Slide 1: Welcome -->
        <div class="slide active welcome-slide">
            <h1>MCPS Mathematics League</h1>
            <div class="meet-dates-grid">
                <div class="meet-date-item">Meet 1: November 14</div>
                <div class="meet-date-item">Meet 2: December 12</div>
                <div class="meet-date-item">Meet 3: January 16</div>
                <div class="meet-date-item">Meet 4: February 13</div>
            </div>

            <div style="margin: 15px auto 30px; padding: 25px; background: rgba(251, 191, 36, 0.15); border: 2px solid #fbbf24; border-radius: 15px; max-width: 900px;">
                <p style="font-size: 1.4rem; font-weight: bold; color: #fbbf24; margin-bottom: 10px;">Before We Begin:</p>
                <p style="font-size: 1.2rem; line-height: 1.6;">
                    Please put everything except your <span class="highlight">pencils and calculators</span> away in your backpacks and leave your backpacks at the front of the room.
                </p>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <h3>Team Round</h3>
                    <p>20 minutes<br>6 questions<br>Calculators allowed<br>Up to 12 points</p>
                </div>
                <div class="info-card">
                    <h3>Relay Team Round</h3>
                    <p>16 minutes total<br>Two 8-minute relays<br>Groups of 3<br>Up to 16 points</p>
                </div>
                <div class="info-card">
                    <h3>Individual Round</h3>
                    <p>24 minutes<br>6 problems<br>No communication<br>Up to 36 points</p>
                </div>
            </div>

            <p style="font-size: 1.5rem; margin-top: 40px;">Total Possible Points: <span class="highlight">64</span></p>
        </div>

        <!-- Slide 2: Team Round Instructions -->
        <div class="slide">
            <div class="round-title">Team Round</div>
            <div class="round-subtitle">20 Minutes • 6 Questions</div>

            <div class="round-info">
                <ul class="instructions-list">
                    <li>Teams work together to answer <span class="highlight">6 questions</span></li>
                    <li>Each correct answer is worth <span class="highlight">2 points</span></li>
                    <li>Maximum points: <span class="highlight">12 points</span></li>
                    <li><span class="highlight">Non-graphing calculators are allowed</span> for this round only</li>
                    <li>Record answers on the team recording form</li>
                </ul>
            </div>

            <div style="margin-top: 40px;">
                <button class="btn primary" onclick="goToSlide(2)">Ready to Begin</button>
            </div>
        </div>

        <!-- Slide 3: Team Round Timer -->
        <div class="slide">
            <div class="round-title">Team Round</div>
            <div class="timer-display" id="timer-team">20:00</div>
            <div class="status-message" id="status-team"></div>

            <div class="timer-controls">
                <button class="btn primary" onclick="startRound('team', 1200)">Start Timer</button>
                <button class="btn" onclick="pauseRound('team')">Pause</button>
                <button class="btn" onclick="resetRound('team', 1200)">Reset</button>
            </div>
        </div>

        <!-- Slide 4: Relay Round Instructions -->
        <div class="slide">
            <div class="round-title">Relay Team Round</div>
            <div class="round-subtitle">16 Minutes Total • Two 8-Minute Relays</div>

            <div class="round-info">
                <ul class="instructions-list">
                    <li><span class="highlight">Put away calculators</span> - not allowed for relay rounds</li>
                    <li>Each team of 6 divides into <span class="highlight">2 groups of 3</span></li>
                    <li>Each relay lasts <span class="highlight">8 minutes</span></li>
                    <li>Trios solve: Starter → Middle → End problems</li>
                    <li><span class="highlight">4 points</span> for correct answer in under 4 minutes</li>
                    <li><span class="highlight">2 points</span> for correct answer by 8 minutes</li>
                    <li>All 4 relay scores count toward team total</li>
                </ul>
            </div>

            <div style="margin-top: 40px;">
                <button class="btn primary" onclick="goToSlide(4)">Ready for Relay 1</button>
            </div>
        </div>

        <!-- Slide 5: Relay Round 1 Timer -->
        <div class="slide">
            <div class="round-title">Relay Round 1</div>
            <div class="timer-display" id="timer-relay1">8:00</div>
            <div class="status-message" id="status-relay1"></div>

            <div class="relay-info">
                <div class="relay-card">
                    <h3>Bonus Window</h3>
                    <p>Submit in under 4 minutes: <span class="highlight">4 points</span></p>
                </div>
                <div class="relay-card">
                    <h3>Regular Window</h3>
                    <p>Submit by 8 minutes: <span class="highlight">2 points</span></p>
                </div>
            </div>

            <div class="timer-controls">
                <button class="btn primary" onclick="startRound('relay1', 480)">Start Relay 1</button>
                <button class="btn" onclick="pauseRound('relay1')">Pause</button>
                <button class="btn" onclick="resetRound('relay1', 480)">Reset</button>
            </div>
        </div>

        <!-- Slide 6: Relay Round 2 Timer -->
        <div class="slide">
            <div class="round-title">Relay Round 2</div>
            <div class="timer-display" id="timer-relay2">8:00</div>
            <div class="status-message" id="status-relay2"></div>

            <div class="relay-info">
                <div class="relay-card">
                    <h3>Bonus Window</h3>
                    <p>Submit in under 4 minutes: <span class="highlight">4 points</span></p>
                </div>
                <div class="relay-card">
                    <h3>Regular Window</h3>
                    <p>Submit by 8 minutes: <span class="highlight">2 points</span></p>
                </div>
            </div>

            <div class="timer-controls">
                <button class="btn primary" onclick="startRound('relay2', 480)">Start Relay 2</button>
                <button class="btn" onclick="pauseRound('relay2')">Pause</button>
                <button class="btn" onclick="resetRound('relay2', 480)">Reset</button>
            </div>
        </div>

        <!-- Slide 7: Individual Round Instructions -->
        <div class="slide">
            <div class="round-title">Individual Round</div>
            <div class="round-subtitle">24 Minutes • 6 Problems</div>

            <div class="round-info">
                <ul class="instructions-list">
                    <li>Each student completes <span class="highlight">6 problems individually</span></li>
                    <li>Students earn <span class="highlight">1 point</span> for each correct answer</li>
                    <li>Maximum team score: <span class="highlight">36 points</span> (6 students × 6 points)</li>
                    <li><span class="highlight">No communication</span> among players during this round</li>
                    <li>Individual scores tracked for ARML standings</li>
                    <li>Record answers on individual recording sheet</li>
                </ul>
            </div>

            <div style="margin-top: 40px;">
                <button class="btn primary" onclick="goToSlide(7)">Ready to Begin</button>
            </div>
        </div>

        <!-- Slide 8: Individual Round Timer -->
        <div class="slide">
            <div class="round-title">Individual Round</div>
            <div class="timer-display" id="timer-individual">24:00</div>
            <div class="status-message" id="status-individual"></div>

            <div class="timer-controls">
                <button class="btn primary" onclick="startRound('individual', 1440)">Start Timer</button>
                <button class="btn" onclick="pauseRound('individual')">Pause</button>
                <button class="btn" onclick="resetRound('individual', 1440)">Reset</button>
            </div>
        </div>

        <!-- Slide 9: Meet Complete -->
        <div class="slide">
            <div class="round-title">Meet Complete!</div>
            <div class="round-subtitle">Thank you for participating</div>

            <div class="info-grid">
                <div class="info-card">
                    <h3>Team Round</h3>
                    <p>12 points possible</p>
                </div>
                <div class="info-card">
                    <h3>Relay Rounds</h3>
                    <p>16 points possible</p>
                </div>
                <div class="info-card">
                    <h3>Individual Round</h3>
                    <p>36 points possible</p>
                </div>
            </div>

            <p style="font-size: 2rem; margin-top: 40px;">
                Total Possible Points: <span class="highlight">64</span>
            </p>

            <p style="font-size: 1.3rem; margin-top: 30px; opacity: 0.9;">
                Your results will be posted on the Parent Portal.
            </p>
        </div>
    </div>

    <!-- Navigation -->
    <div class="navigation">
        <button class="nav-btn" onclick="previousSlide()">◄</button>
        <span class="slide-counter"><span id="current-slide">1</span> / 9</span>
        <button class="nav-btn" onclick="nextSlide()">►</button>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        // Timer state for each round
        const timers = {
            team: { interval: null, remaining: 1200, paused: false, started: false },
            relay1: { interval: null, remaining: 480, paused: false, started: false },
            relay2: { interval: null, remaining: 480, paused: false, started: false },
            individual: { interval: null, remaining: 1440, paused: false, started: false }
        };

        // Speech synthesis
        const synth = window.speechSynthesis;

        function speak(text, options = {}) {
            if (synth.speaking) {
                synth.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = options.rate || 1.0;
            utterance.pitch = options.pitch || 1.0;
            utterance.volume = options.volume || 1.0;
            synth.speak(utterance);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function startRound(roundName, totalSeconds) {
            const timer = timers[roundName];

            if (timer.started && !timer.paused) {
                return; // Already running
            }

            if (!timer.started) {
                timer.remaining = totalSeconds;
                timer.started = true;

                // Announcement based on round
                if (roundName === 'team') {
                    speak("Team round begins. You have 20 minutes.");
                } else if (roundName === 'relay1') {
                    speak("Relay round 1 begins. You have 8 minutes.");
                } else if (roundName === 'relay2') {
                    speak("Relay round 2 begins. You have 8 minutes.");
                } else if (roundName === 'individual') {
                    speak("Individual round begins. You have 24 minutes.");
                }
            }

            timer.paused = false;
            const display = document.getElementById(`timer-${roundName}`);
            const status = document.getElementById(`status-${roundName}`);

            timer.interval = setInterval(() => {
                if (timer.paused) return;

                timer.remaining--;
                display.textContent = formatTime(timer.remaining);

                // Voice announcements at key intervals
                if (roundName === 'relay1' || roundName === 'relay2') {
                    // Relay-specific announcements
                    if (timer.remaining === 240) { // 4 minutes (halfway, end of bonus)
                        speak("4 minutes remaining. Bonus window has ended.");
                        status.textContent = "Bonus window ended - 2 points for correct answer";
                    } else if (timer.remaining === 60) {
                        speak("1 minute remaining.");
                    } else if (timer.remaining === 10) {
                        speak("10 seconds remaining.");
                        display.classList.add('critical');
                    } else if (timer.remaining <= 10 && timer.remaining > 0) {
                        speak(timer.remaining.toString());
                    }
                } else {
                    // Team and Individual round announcements
                    const halfTime = Math.floor(totalSeconds / 2);

                    if (timer.remaining === halfTime) {
                        speak(`${Math.floor(halfTime / 60)} minutes remaining. Halfway point.`);
                        display.classList.add('warning');
                    } else if (timer.remaining === 300) { // 5 minutes
                        speak("5 minutes remaining.");
                    } else if (timer.remaining === 120) { // 2 minutes
                        speak("2 minutes remaining.");
                    } else if (timer.remaining === 60) {
                        speak("1 minute remaining.");
                    } else if (timer.remaining === 10) {
                        speak("10 seconds remaining.");
                        display.classList.add('critical');
                    } else if (timer.remaining <= 10 && timer.remaining > 0) {
                        speak(timer.remaining.toString());
                    }
                }

                // Time's up
                if (timer.remaining === 0) {
                    clearInterval(timer.interval);
                    speak("Time is up. Please stop working and submit your answers.");
                    display.textContent = "TIME!";
                    display.classList.add('critical');
                    status.textContent = "Time's up! Please submit your answers.";
                    timer.started = false;
                }
            }, 1000);
        }

        function pauseRound(roundName) {
            const timer = timers[roundName];
            timer.paused = !timer.paused;

            if (timer.paused) {
                speak("Timer paused.");
                document.getElementById(`status-${roundName}`).textContent = "Timer paused";
            } else {
                speak("Timer resumed.");
                document.getElementById(`status-${roundName}`).textContent = "";
            }
        }

        function resetRound(roundName, totalSeconds) {
            const timer = timers[roundName];
            clearInterval(timer.interval);
            timer.interval = null;
            timer.remaining = totalSeconds;
            timer.paused = false;
            timer.started = false;

            const display = document.getElementById(`timer-${roundName}`);
            display.textContent = formatTime(totalSeconds);
            display.classList.remove('warning', 'critical');

            document.getElementById(`status-${roundName}`).textContent = "";
            speak("Timer reset.");
        }

        function goToSlide(index) {
            slides[currentSlide].classList.remove('active');
            currentSlide = index;
            slides[currentSlide].classList.add('active');
            document.getElementById('current-slide').textContent = currentSlide + 1;
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                goToSlide(currentSlide + 1);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                goToSlide(currentSlide - 1);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextSlide();
            if (e.key === 'ArrowLeft') previousSlide();

            // Spacebar to start timer on timer slides
            if (e.key === ' ' && e.target.tagName !== 'BUTTON') {
                e.preventDefault();
                if (currentSlide === 2) startRound('team', 1200);
                if (currentSlide === 4) startRound('relay1', 480);
                if (currentSlide === 5) startRound('relay2', 480);
                if (currentSlide === 7) startRound('individual', 1440);
            }
        });

        // Update slide counter on load
        document.getElementById('current-slide').textContent = currentSlide + 1;
    </script>
</body>
</html>